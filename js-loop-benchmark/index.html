<!doctype html!>
<html>
    <head>
        <title>Loop Benchmark</title>
        <script type="text/javascript" src="jquery.min.js"></script>
    </head>
    <body>
        <header>
            <h1>Loop Benchmark</h1>
        </header>
        <article>
            <p>
                no calculation: <span id="nocalc"></span>
            </p>
            <script type="text/javascript">
            </script>
            
            <p>$.each: <span id="iter"></span></p>
            <p>for (i = 0, l = a.length; i &lt l; i += 1): <span id="forloop1"></span></p>
            <p>for (i = 0, l = a.length; i &lt l; i++): <span id="forloop2"></span></p>
            <p>for (i = 0; i &lt a.length; i += 1): <span id="forloop3"></span></p>
            <p>for (i = 0; i &lt a.length; i++) : <span id="forloop4"></span></p>

        </article>
        <script type="text/javascript">           
function nocalc() {
    return 55;
}

function iter() {
    var a, ans;
    a = [1,2,3,4,5,6,7,8,9,10];
    ans = 0;
    $.each(a, function() {
        ans += this;
    });

    return ans;
};

function forloop1() {
    var a, ans, i, l;

    a = [1,2,3,4,5,6,7,8,9,10];
    ans = 0;

    for(i = 0, l = a.length; i < l; i = i+1) {
        ans += a[i];
    }

    return ans;
}

function forloop2() {
    var a, ans, i, l;

    a = [1,2,3,4,5,6,7,8,9,10];
    ans = 0;

    for(i = 0, l = a.length; i < l; i++) {
        ans += a[i];
    }

    return ans;
}

function forloop3() {
    var a, ans, i;

    a = [1,2,3,4,5,6,7,8,9,10];
    ans = 0;

    for(i = 0; i < ans.length; i = i+1) {
        ans += a[i];
    }

    return ans;
}

function forloop4() {
    var a, ans, i;

    a = [1,2,3,4,5,6,7,8,9,10];
    ans = 0;

    for(i = 0; i < ans.length; i++) {
        ans += a[i];
    }

    return ans;
}

function run(f) {
    var i, t;

    t = Date.now();

    for(i = 0; i < 100000; i ++) {
        f();
    }

    return Date.now() - t;
}

(function() {
    $("#forloop4").html( run(forloop4) );
    $("#forloop3").html( run(forloop3) );
    $("#forloop2").html( run(forloop2) );
    $("#forloop1").html( run(forloop1) );
    $("#iter").html( run(iter) );
    $("#nocalc").html( run(nocalc) );
}());


        </script>
    </body>
</html>
